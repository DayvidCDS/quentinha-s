<!DOCTYPE html>
<html>

<head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Profile | User</title>

    <!--- Site CSS -->
    <link rel="stylesheet" type="text/css" href="/dist/components/reset.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/site.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/grid.css">

    <!--- Component CSS -->
    <link rel="stylesheet" type="text/css" href="/dist/components/icon.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/card.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/label.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/image.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/reveal.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/dimmer.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/rating.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/transition.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/popup.css">

    <link rel="stylesheet" type="text/css" href="/dist/components/divider.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/segment.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/form.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/input.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/list.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/message.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/icon.css">

    <link rel="stylesheet" type="text/css" href="/dist/components/container.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/grid.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/header.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/image.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/menu.css">

    <link rel="stylesheet" type="text/css" href="/dist/components/reset.css">

    <link rel="stylesheet" type="text/css" href="/dist/components/reset.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/site.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/grid.css">

    <!--- Component CSS -->
    <link rel="stylesheet" type="text/css" href="/dist/components/icon.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/table.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/transition.css">
    <link rel="stylesheet" type="text/css" href="/dist/components/popup.css">

    <!--- Component JS -->
    <script src="../assets/library/jquery.min.js"></script>
    <script src="../assets/library/iframe-content.js"></script>
    <script type="text/javascript" src="/dist/components/popup.js"></script>
    <script type="text/javascript" src="/dist/components/transition.js"></script>

    <script src="/assets/library/jquery.min.js"></script>
    <script src="/assets/library/iframe-content.js"></script>
    <script type="text/javascript" src="/dist/components/popup.js"></script>
    <script type="text/javascript" src="/dist/components/dimmer.js"></script>
    <script type="text/javascript" src="/dist/components/rating.js"></script>
    <script type="text/javascript" src="/dist/components/transition.js"></script>
    <script src="/scripts/js/jquery.min.js"></script>

    <script src="/assets/library/jquery.min.js"></script>
    <script src="/dist/components/form.js"></script>
    <script src="/dist/components/transition.js"></script>

    <style type="text/css">
        h2 {
            margin: 2em 0em;
        }
        
        .ui.container {
            padding-top: 5em;
            padding-bottom: 5em;
        }
    </style>
</head>

<body>

    <div class="ui container" style="padding-top: 0px">
        <div class="ui menu">
            <a href="/">
                <div class="header item">
                    <img class="logo" style=" max-width: 100%; height: auto; width: auto\9; /* ie8 */" src="/images/logo.png"> Quentinha's
                </div>
            </a>
            <a class="item" href="/">
          Home
        </a>
            <a class="item" href="#">
          Sobre
        </a>
            <div class="item right">
                <div class="ui primary button" onclick="location.href='/api/user/logout'">Sair</div>
            </div>

        </div>
        <h2 class="ui header">Perfil</h2>
        <div class="ui grid">
            <div class="four wide column">
                <div class="ui card">
                    <div class="blurring dimmable image">
                        <img src="/images/elliot.jpg">
                    </div>
                    <div class="content">
                        <div class="header">

                            <span class="date" id="name-profile"></span>
                        </div>
                        <div class="meta">

                            <span class="date" id="email-profile"></span>
                        </div>
                        <div class="meta">

                            <span class="date" id="phone-profile"></span>
                        </div>
                    </div>
                    <div class="extra content">
                        <a>
                            <i class="edit icon"></i> Editar Perfil
                        </a>
                    </div>
                </div>
            </div>
            <div class="twelve wide column">
                <h2 class="ui header">Restaurantes em Funcionamento</h2>
                <table class="ui single line celled table">
                    <thead>
                        <tr>
                            <th>Restaurante</th>
                            <th>CNPJ</th>
                            <th>Localização</th>
                            <th>Telefone</th>
                            <th>E-mail</th>
                        </tr>
                    </thead>
                    <tbody id="tabela">
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <script>
        $(document).ready(function() {
            //document.getElementById('a').innerHTML = "TESTE"
            $.get("/api/user/home", function(data) {
                //alert(JSON.stringify(data));
                if (data !== null) {
                    document.getElementById("name-profile").innerHTML = data.profile.name
                    document.getElementById("email-profile").innerHTML = data.profile.email
                    document.getElementById("phone-profile").innerHTML = data.profile.tel
                }
            })

            $.get("/api/restaurant/findAllOnline", function(dados) {
                //document.write(JSON.stringify(dados));
                //alert(dados.length)
                if (Array.isArray(dados)) {
                    for (var i = 0; dados.length > i; i++) {
                        //Adicionando registros retornados na tabela
                        $('#tabela').append('<tr><td>' + dados[i].name + '</td><td>' + dados[i].cnpj + '</td><td>' + dados[i].localization + '</td><td>' + dados[i].tel + '</td><td>' + dados[i].email + '</td></tr>');
                        //$('#tabela').append('<tr><td>' + dados[i].restaurant[i].name + '</td><td>' + dados[i]._id + '</td><td>' + dados[i].restaurant[i].localization + '</td><td>' + dados[i].restaurant[i].tel + '</td><td>' + dados[i].restaurant[i].email + '</td></tr>');
                    }
                }
            })

        })
    </script>

</body>

</html>